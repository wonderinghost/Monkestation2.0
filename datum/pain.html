<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/pain - MonkeStation 2.0</title></head><body><header><a href="index.html">MonkeStation 2.0</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/pain.html#var">Var Details</a> - <a href="datum/pain.html#proc">Proc Details</a></header><main><h1>pain <aside>/<a href="datum.html">datum</a>/<a href="datum/pain.html">pain</a></aside> <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L7"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 7"></a></h1><p>The pain controller datum.</p>
<p>Attatched to a /carbon/human, this datum tracks all the pain values on all their bodyparts and handles updating them.
This datum processes on alive humans every 2 seconds.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/pain.html#var/base_pain_decay">base_pain_decay</a></th><td>The base amount of pain decay received.</td></tr><tr><th><a href="datum/pain.html#var/body_zones">body_zones</a></th><td>Lazy Assoc list [zones] to [references to bodyparts], all the body parts we're tracking</td></tr><tr><th><a href="datum/pain.html#var/heart_attack_counter">heart_attack_counter</a></th><td>Tracks how many successful heart attack rolls in a row</td></tr><tr><th><a href="datum/pain.html#var/natural_decay_counter">natural_decay_counter</a></th><td>Counter to track pain decay. Pain decay is only done once every 5 ticks.</td></tr><tr><th><a href="datum/pain.html#var/natural_pain_decay">natural_pain_decay</a></th><td>Natural amount of decay given to each limb per 5 ticks of process, increases over time</td></tr><tr><th><a href="datum/pain.html#var/pain_modifier">pain_modifier</a></th><td>Modifier applied to all [adjust_pain] amounts</td></tr><tr><th><a href="datum/pain.html#var/pain_mods">pain_mods</a></th><td>Lazy Assoc list [id] to [modifier], all our pain modifiers affecting our final mod</td></tr><tr><th><a href="datum/pain.html#var/parent">parent</a></th><td>The parent mob we're tracking.</td></tr><tr><th><a href="datum/pain.html#var/shock_buildup">shock_buildup</a></th><td>Amount of shock building up from higher levels of pain
When greater than current health, we go into shock</td></tr><tr><th><a href="datum/pain.html#var/time_since_last_heart_attack_counter">time_since_last_heart_attack_counter</a></th><td>Cooldown to track last time heart attack counter went up.</td></tr><tr><th><a href="datum/pain.html#var/time_since_last_pain_loss">time_since_last_pain_loss</a></th><td>Cooldown to track the last time we lost pain.</td></tr><tr><th><a href="datum/pain.html#var/time_since_last_pain_message">time_since_last_pain_message</a></th><td>Cooldown to track last time we sent a pain message.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/pain.html#proc/add_bodypart">add_bodypart</a></th><td>Add a limb to be tracked.</td></tr><tr><th><a href="datum/pain.html#proc/add_wound_pain">add_wound_pain</a></th><td></td></tr><tr><th><a href="datum/pain.html#proc/adjust_bodypart_min_pain">adjust_bodypart_min_pain</a></th><td>Set the minimum amount of pain in all [def_zones] by [amount].</td></tr><tr><th><a href="datum/pain.html#proc/adjust_bodypart_pain">adjust_bodypart_pain</a></th><td>Adjust the amount of pain in all [def_zones] provided by [amount] (multiplied by the [pain_modifier] if positive).</td></tr><tr><th><a href="datum/pain.html#proc/check_lying_pain_modifier">check_lying_pain_modifier</a></th><td>Whenever we buckle to something or lie down, get a pain bodifier.</td></tr><tr><th><a href="datum/pain.html#proc/clear_pain_attributes">clear_pain_attributes</a></th><td>Clears all pain related attributes</td></tr><tr><th><a href="datum/pain.html#proc/do_pain_emote">do_pain_emote</a></th><td>Run a pain related emote, if a few checks are successful.</td></tr><tr><th><a href="datum/pain.html#proc/do_pain_message">do_pain_message</a></th><td>Run a pain related message, if a few checks are successful.</td></tr><tr><th><a href="datum/pain.html#proc/get_average_pain">get_average_pain</a></th><td>Get the average pain of all bodyparts as a percent of the total pain.</td></tr><tr><th><a href="datum/pain.html#proc/get_heartrate_modifier">get_heartrate_modifier</a></th><td>Used to get the effect of pain on the parent's heart rate.</td></tr><tr><th><a href="datum/pain.html#proc/get_total_pain">get_total_pain</a></th><td>Get the total pain of all bodyparts.</td></tr><tr><th><a href="datum/pain.html#proc/handle_message">handle_message</a></th><td>Adds a custom stammer to people under the effects of pain.</td></tr><tr><th><a href="datum/pain.html#proc/on_analyzed">on_analyzed</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_HEALTHSCAN" title="COMSIG_LIVING_HEALTHSCAN">COMSIG_LIVING_HEALTHSCAN</a>
Reports how much pain [parent] is sustaining to [user].</td></tr><tr><th><a href="datum/pain.html#proc/on_mob_fired_gun">on_mob_fired_gun</a></th><td>Affect accuracy of fired guns while in pain.</td></tr><tr><th><a href="datum/pain.html#proc/on_pain_gain">on_pain_gain</a></th><td>Called when pain is gained to apply side effects.
Calls [affected_part]'s [on_gain_pain_effects] proc with arguments [amount].
Sends signal <a href="code/__DEFINES/~monkestation/pain.html#define/COMSIG_CARBON_PAIN_GAINED" title="COMSIG_CARBON_PAIN_GAINED">COMSIG_CARBON_PAIN_GAINED</a> with arguments <a href="mob/living/carbon.html" title="/mob/living/carbon">mob/living/carbon/parent, obj/item/bodypart/affected_part, amount</a>.</td></tr><tr><th><a href="datum/pain.html#proc/on_pain_loss">on_pain_loss</a></th><td>Called when pain is lost, if the mob did not lose pain in the last 60 seconds.
Calls [affected_part]'s [on_lose_pain_effects] proc with arguments [amount].
Sends signal <a href="code/__DEFINES/~monkestation/pain.html#define/COMSIG_CARBON_PAIN_LOST" title="COMSIG_CARBON_PAIN_LOST">COMSIG_CARBON_PAIN_LOST</a> with arguments <a href="mob/living/carbon.html" title="/mob/living/carbon">mob/living/carbon/parent, obj/item/bodypart/affected_part, amount</a>.</td></tr><tr><th><a href="datum/pain.html#proc/on_parent_statchance">on_parent_statchance</a></th><td>Determines if we should be processing or not.</td></tr><tr><th><a href="datum/pain.html#proc/process">process</a></th><td>The process proc for pain.</td></tr><tr><th><a href="datum/pain.html#proc/refresh_pain_attributes">refresh_pain_attributes</a></th><td>Apply or remove pain various modifiers from pain (mood, action speed, movement speed) based on the [average_pain].</td></tr><tr><th><a href="datum/pain.html#proc/register_pain_signals">register_pain_signals</a></th><td>Register all of our signals with our parent.</td></tr><tr><th><a href="datum/pain.html#proc/remove_all_pain">remove_all_pain</a></th><td>Clear all pain attributes and bodypart pain</td></tr><tr><th><a href="datum/pain.html#proc/remove_bodypart">remove_bodypart</a></th><td>Remove a limb from being tracked.</td></tr><tr><th><a href="datum/pain.html#proc/remove_wound_pain">remove_wound_pain</a></th><td>Remove pain from a healed wound.</td></tr><tr><th><a href="datum/pain.html#proc/revived">revived</a></th><td>When we are revived, reduced shock</td></tr><tr><th><a href="datum/pain.html#proc/set_pain_modifier">set_pain_modifier</a></th><td>Add a pain modifier and update our overall modifier.</td></tr><tr><th><a href="datum/pain.html#proc/unregister_pain_signals">unregister_pain_signals</a></th><td>Unregister all of our signals from our parent when we're done, if we have signals to unregister.</td></tr><tr><th><a href="datum/pain.html#proc/unset_pain_modifier">unset_pain_modifier</a></th><td>Remove a pain modifier and update our overall modifier.</td></tr><tr><th><a href="datum/pain.html#proc/update_pain_modifier">update_pain_modifier</a></th><td>Update our overall pain modifier.
The pain modifier is multiplicative based on all the pain modifiers we have.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/base_pain_decay"><aside class="declaration">var </aside>base_pain_decay <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L19"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 19"></a></h3><p>The base amount of pain decay received.</p><h3 id="var/body_zones"><aside class="declaration">var </aside>body_zones <aside>– /list</aside> <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L15"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 15"></a></h3><p>Lazy Assoc list [zones] to [references to bodyparts], all the body parts we're tracking</p><h3 id="var/heart_attack_counter"><aside class="declaration">var </aside>heart_attack_counter <aside>– /final</aside> <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L26"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 26"></a></h3><p>Tracks how many successful heart attack rolls in a row</p><h3 id="var/natural_decay_counter"><aside class="declaration">var </aside>natural_decay_counter <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L21"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 21"></a></h3><p>Counter to track pain decay. Pain decay is only done once every 5 ticks.</p><h3 id="var/natural_pain_decay"><aside class="declaration">var </aside>natural_pain_decay <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L17"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 17"></a></h3><p>Natural amount of decay given to each limb per 5 ticks of process, increases over time</p><h3 id="var/pain_modifier"><aside class="declaration">var </aside>pain_modifier <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L11"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 11"></a></h3><p>Modifier applied to all [adjust_pain] amounts</p><h3 id="var/pain_mods"><aside class="declaration">var </aside>pain_mods <aside>– /list</aside> <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L13"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 13"></a></h3><p>Lazy Assoc list [id] to [modifier], all our pain modifiers affecting our final mod</p><h3 id="var/parent"><aside class="declaration">var </aside>parent <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a></aside> <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L9"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 9"></a></h3><p>The parent mob we're tracking.</p><h3 id="var/shock_buildup"><aside class="declaration">var </aside>shock_buildup <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L24"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 24"></a></h3><p>Amount of shock building up from higher levels of pain
When greater than current health, we go into shock</p><h3 id="var/time_since_last_heart_attack_counter"><aside class="declaration">var </aside>time_since_last_heart_attack_counter <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L32"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 32"></a></h3><p>Cooldown to track last time heart attack counter went up.</p><h3 id="var/time_since_last_pain_loss"><aside class="declaration">var </aside>time_since_last_pain_loss <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L28"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 28"></a></h3><p>Cooldown to track the last time we lost pain.</p><h3 id="var/time_since_last_pain_message"><aside class="declaration">var </aside>time_since_last_pain_message <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L30"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 30"></a></h3><p>Cooldown to track last time we sent a pain message.</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_bodypart"><aside class="declaration">proc </aside>add_bodypart<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/bodypart.html">bodypart</a>/new_limb, special)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L123"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 123"></a></aside></h3><p>Add a limb to be tracked.</p>
<p>source - source of the signal / the mob who is gaining the limb / parent
new_limb - the bodypart being attatched
special - whether this limb being attatched should have side effects (if TRUE, likely being attatched on initialization)</p><h3 id="proc/add_wound_pain"><aside class="declaration">proc </aside>add_wound_pain<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/source, /<a href="datum.html">datum</a>/<a href="datum/wound.html">wound</a>/applied_wound, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/bodypart.html">bodypart</a>/wounded_limb)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L507"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 507"></a></aside></h3><ul>
<li>
<p>Hook into <a href="mob/living.html#proc/apply_damage" title="/mob/living">/mob/living/proc/apply_damage</a> proc via signal and apply pain based on how much damage was gained.</p>
</li>
<li>
<p>source - source of the signal / the mob being damaged / parent</p>
</li>
<li>
<p>damage - the amount of damage sustained</p>
</li>
<li>
<p>damagetype - the type of damage sustained</p>
</li>
<li>
<p>def_zone - the limb being targeted with damage (either a bodypart zone or an obj/item/bodypart)</p>
</li>
</ul>
<p>/datum/pain/proc/add_damage_pain(
mob/living/carbon/source,
damage,
damagetype,
def_zone,
blocked = 0,
wound_bonus = 0,
bare_wound_bonus = 0,
sharpness = NONE,
attack_direction,
obj/item/attacking_item,
)</p>
<pre><code>SIGNAL_HANDLER

if(damage &lt;= 2.5 || HAS_TRAIT(parent, TRAIT_GODMODE))
	return
if(isbodypart(def_zone))
	var/obj/item/bodypart/targeted_part = def_zone
	def_zone = targeted_part.body_zone
else
	def_zone = check_zone(def_zone)

// By default pain is calculated based on damage and wounding
// Attacks with a wound bonus add additional pain (usually, like 2-5)
// (Note that if they also succeed in applying a wound, more pain comes from that)
// Also, sharp attacks apply a smidge extra pain
var/pain = ((100 - blocked) / 100) * ((10 * damage) ** 0.66 + (0.2 * max(wound_bonus + bare_wound_bonus - parent.getarmor(def_zone, WOUND), 0))) * (sharpness ? 1.2 : 1)
switch(damagetype)
	// Brute pain is dealt to the target zone
	// pain is just divided by a random number, for variance
	if(BRUTE)
		pain *= pick(0.6, 0.7, 0.8)

	// Burn pain is dealt to the target zone
	// pain is lower for weaker burns, but scales up for more damaging burns
	if(BURN)
		switch(damage)
			if(1 to 10)
				pain *= 0.25
			if(10 to 20)
				pain *= 0.5
			if(20 to INFINITY)
				pain *= 0.75

	// Toxins pain is dealt to the chest (stomach and liver)
	// Pain is determined by the liver's tox tolerance, liver damage, and stomach damage
	// having a high amount of toxloss also adds additional pain
	//
	// Note: 99% of sources of toxdamage is done through adjusttoxloss, and as such doesn't go through this
	if(TOX)
		if(HAS_TRAIT(parent, TRAIT_TOXINLOVER) || HAS_TRAIT(parent, TRAIT_TOXIMMUNE))
			return
		def_zone = BODY_ZONE_CHEST
		var/obj/item/organ/internal/liver/our_liver = source.get_organ_slot(ORGAN_SLOT_LIVER)
		var/obj/item/organ/internal/stomach/our_stomach = source.get_organ_slot(ORGAN_SLOT_STOMACH)
		if(our_liver)
			pain = damage / our_liver.toxTolerance
			switch(our_liver.damage)
				if(20 to 50)
					pain += 1
				if(50 to 80)
					pain += 2
				if(80 to INFINITY)
					pain += 3
		else if(HAS_TRAIT(parent, TRAIT_LIVERLESS_METABOLISM))
			pain = 1
		else
			pain = damage * 2

		if(our_stomach)
			switch(our_stomach.damage)
				if(20 to 50)
					pain += 1
				if(50 to 80)
					pain += 2
				if(80 to INFINITY)
					pain += 3
		else if(HAS_TRAIT(parent, TRAIT_NOHUNGER))
			pain = 1
		else
			pain += 3

		switch(source.getToxLoss())
			if(33 to 66)
				pain += 1
			if(66 to INFINITY)
				pain += 3

	// Oxy pain is dealt to the head and chest
	// pain is increasd based on lung damage and overall oxyloss
	//
	// Note: 99% of sources of oxydamage is done through adjustoxyloss, and as such doesn't go through this
	if(OXY)
		return

	// No pain from stamina loss
	// In the future stamina can probably cause very sharp pain and replace stamcrit,
	// but the system will require much finer tuning before then
	if(STAMINA, PAIN)
		return

	// Head pain causes brain damage, so brain damage causes no pain (to prevent death spirals)
	if(BRAIN)
		return

if(!def_zone || !pain)
</code></pre>
<p>#ifdef TESTING
if(print_debug_messages)
testing(&quot;PAIN DEBUG: [parent] recieved damage but no pain. ([def_zone ? &quot;Nullified to [pain]&quot; : &quot;No def zone&quot;])&quot;)
#endif
return</p>
<p>#ifdef TESTING
if(print_debug_messages)
testing(&quot;PAIN DEBUG: [parent] is recieving [pain] of type [damagetype] to the [parse_zone(def_zone)]. (Original amount: [damage])&quot;)
#endif</p>
<pre><code>adjust_bodypart_pain(def_zone, pain, damagetype)
</code></pre>
<p>Add pain in from a received wound based on severity.</p>
<p>source - source of the signal / the mob being wounded / parent
applied_wound - the wound being applied
wounded_limb - the limb being wounded</p><h3 id="proc/adjust_bodypart_min_pain"><aside class="declaration">proc </aside>adjust_bodypart_min_pain<aside>(/list/def_zones, amount)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L322"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 322"></a></aside></h3><p>Set the minimum amount of pain in all [def_zones] by [amount].</p>
<p>def_zones - list of all zones being adjusted. Can be passed a non-list.
amount - amount of pain being all items in [def_zones] are set to.</p><h3 id="proc/adjust_bodypart_pain"><aside class="declaration">proc </aside>adjust_bodypart_pain<aside>(/list/def_zones, amount, dam_type)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L253"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 253"></a></aside></h3><p>Adjust the amount of pain in all [def_zones] provided by [amount] (multiplied by the [pain_modifier] if positive).</p>
<p>def_zones - list of all zones being adjusted. Can be passed a non-list.
amount - amount of pain being applied to all items in [def_zones]. If posiitve, multiplied by [pain_modifier].</p><h3 id="proc/check_lying_pain_modifier"><aside class="declaration">proc </aside>check_lying_pain_modifier<aside>(/<a href="datum.html">datum</a>/source, new_buckled)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L736"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 736"></a></aside></h3><p>Whenever we buckle to something or lie down, get a pain bodifier.</p><h3 id="proc/clear_pain_attributes"><aside class="declaration">proc </aside>clear_pain_attributes<aside>()  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L1093"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 1093"></a></aside></h3><p>Clears all pain related attributes</p><h3 id="proc/do_pain_emote"><aside class="declaration">proc </aside>do_pain_emote<aside>(emote, cooldown)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L826"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 826"></a></aside></h3><p>Run a pain related emote, if a few checks are successful.</p>
<p>emote - string, what emote we're running
cooldown - what cooldown to set our emote cooldown to</p>
<p>returns TRUE if successful.</p><h3 id="proc/do_pain_message"><aside class="declaration">proc </aside>do_pain_message<aside>(message, painless_message, cooldown)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L849"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 849"></a></aside></h3><p>Run a pain related message, if a few checks are successful.</p>
<p>message - string, what message we're sending
painless_message - optional string, what message we're sending if the mob doesn't &quot;feel&quot; pain
cooldown - what cooldown to set our message cooldown to</p>
<p>returns TRUE if successful.
Returns FALSE if we failed to send a message, even if painless_message was provided and sent.</p><h3 id="proc/get_average_pain"><aside class="declaration">proc </aside>get_average_pain<aside>()  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L872"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 872"></a></aside></h3><p>Get the average pain of all bodyparts as a percent of the total pain.</p><h3 id="proc/get_heartrate_modifier"><aside class="declaration">proc </aside>get_heartrate_modifier<aside>()  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L954"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 954"></a></aside></h3><p>Used to get the effect of pain on the parent's heart rate.</p><h3 id="proc/get_total_pain"><aside class="declaration">proc </aside>get_total_pain<aside>()  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L885"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 885"></a></aside></h3><p>Get the total pain of all bodyparts.</p><h3 id="proc/handle_message"><aside class="declaration">proc </aside>handle_message<aside>(/<a href="datum.html">datum</a>/source, /list/message_args)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L896"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 896"></a></aside></h3><p>Adds a custom stammer to people under the effects of pain.</p><h3 id="proc/on_analyzed"><aside class="declaration">proc </aside>on_analyzed<aside>(/<a href="datum.html">datum</a>/source, /list/render_list, advanced, /<a href="mob.html">mob</a>/user, mode, tochat)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L983"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 983"></a></aside></h3><p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_HEALTHSCAN" title="COMSIG_LIVING_HEALTHSCAN">COMSIG_LIVING_HEALTHSCAN</a>
Reports how much pain [parent] is sustaining to [user].</p>
<p>Note, this report is relatively vague intentionally -
rather than sending a detailed report of which bodyparts are in pain and how much,
the patient is encouraged to elaborate on which bodyparts hurt the most, and how much they hurt.
(To encourage a bit more interaction between the doctors.)</p><h3 id="proc/on_mob_fired_gun"><aside class="declaration">proc </aside>on_mob_fired_gun<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/gun.html">gun</a>/gun_fired, target, params, zone_override, /list/bonus_spread_values)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L752"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 752"></a></aside></h3><p>Affect accuracy of fired guns while in pain.</p><h3 id="proc/on_pain_gain"><aside class="declaration">proc </aside>on_pain_gain<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/bodypart.html">bodypart</a>/affected_part, amount, dam_type)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L346"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 346"></a></aside></h3><p>Called when pain is gained to apply side effects.
Calls [affected_part]'s [on_gain_pain_effects] proc with arguments [amount].
Sends signal <a href="code/__DEFINES/~monkestation/pain.html#define/COMSIG_CARBON_PAIN_GAINED" title="COMSIG_CARBON_PAIN_GAINED">COMSIG_CARBON_PAIN_GAINED</a> with arguments <a href="mob/living/carbon.html" title="/mob/living/carbon">mob/living/carbon/parent, obj/item/bodypart/affected_part, amount</a>.</p>
<p>affected_part - the bodypart that gained the pain
amount - amount of pain that was gained, post-[pain_modifier] applied</p><h3 id="proc/on_pain_loss"><aside class="declaration">proc </aside>on_pain_loss<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/bodypart.html">bodypart</a>/affected_part, amount, type)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L367"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 367"></a></aside></h3><p>Called when pain is lost, if the mob did not lose pain in the last 60 seconds.
Calls [affected_part]'s [on_lose_pain_effects] proc with arguments [amount].
Sends signal <a href="code/__DEFINES/~monkestation/pain.html#define/COMSIG_CARBON_PAIN_LOST" title="COMSIG_CARBON_PAIN_LOST">COMSIG_CARBON_PAIN_LOST</a> with arguments <a href="mob/living/carbon.html" title="/mob/living/carbon">mob/living/carbon/parent, obj/item/bodypart/affected_part, amount</a>.</p>
<p>affected_part - the bodypart that lost pain
amount - amount of pain that was lost</p><h3 id="proc/on_parent_statchance"><aside class="declaration">proc </aside>on_parent_statchance<aside>(/<a href="mob.html">mob</a>/source)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L938"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 938"></a></aside></h3><p>Determines if we should be processing or not.</p><h3 id="proc/process"><aside class="parent"><a title="/datum" href="datum.html#proc/process">↑</a></aside>process<aside>(seconds_per_tick)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L540"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 540"></a></aside></h3><p>The process proc for pain.</p>
<p>Applies and removes pain modifiers as they come and go.
Causes various side effects based on pain.</p>
<p>Triggers once every 2 seconds.
Handles natural pain decay, which happens once every 5 processes (every 10 seconds)</p><h3 id="proc/refresh_pain_attributes"><aside class="declaration">proc </aside>refresh_pain_attributes<aside>(...)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L773"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 773"></a></aside></h3><p>Apply or remove pain various modifiers from pain (mood, action speed, movement speed) based on the [average_pain].</p><h3 id="proc/register_pain_signals"><aside class="declaration">proc </aside>register_pain_signals<aside>()  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L82"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 82"></a></aside></h3><p>Register all of our signals with our parent.</p><h3 id="proc/remove_all_pain"><aside class="declaration">proc </aside>remove_all_pain<aside>()  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L214"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 214"></a></aside></h3><p>Clear all pain attributes and bodypart pain</p><h3 id="proc/remove_bodypart"><aside class="declaration">proc </aside>remove_bodypart<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/source, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/bodypart.html">bodypart</a>/lost_limb, dismembered, special)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L151"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 151"></a></aside></h3><p>Remove a limb from being tracked.</p>
<p>source - source of the signal / the mob who is losing the limb / parent
lost_limb - the bodypart being removed
special - whether this limb being removed should have side effects (if TRUE, likely being removed on initialization)
dismembered - whether this limb was dismembered</p><h3 id="proc/remove_wound_pain"><aside class="declaration">proc </aside>remove_wound_pain<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/source, /<a href="datum.html">datum</a>/<a href="datum/wound.html">wound</a>/removed_wound, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/bodypart.html">bodypart</a>/wounded_limb)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L525"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 525"></a></aside></h3><p>Remove pain from a healed wound.</p>
<p>source - source of the signal / the mob being wounded / parent
removed_wound - the wound being healed
wounded_limb - the limb that was wounded</p><h3 id="proc/revived"><aside class="declaration">proc </aside>revived<aside>(...)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L948"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 948"></a></aside></h3><p>When we are revived, reduced shock</p><h3 id="proc/set_pain_modifier"><aside class="declaration">proc </aside>set_pain_modifier<aside>(key, amount)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L185"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 185"></a></aside></h3><p>Add a pain modifier and update our overall modifier.</p>
<p>key - key of the added modifier
amount - multiplier of the modifier</p>
<p>returns TRUE if our pain mod actually changed</p><h3 id="proc/unregister_pain_signals"><aside class="declaration">proc </aside>unregister_pain_signals<aside>()  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L99"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 99"></a></aside></h3><p>Unregister all of our signals from our parent when we're done, if we have signals to unregister.</p><h3 id="proc/unset_pain_modifier"><aside class="declaration">proc </aside>unset_pain_modifier<aside>(key)  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L206"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 206"></a></aside></h3><p>Remove a pain modifier and update our overall modifier.</p>
<p>key - key of the removed modifier</p>
<p>returns TRUE if our pain mod actually changed</p><h3 id="proc/update_pain_modifier"><aside class="declaration">proc </aside>update_pain_modifier<aside>()  <a href="https://github.com/wonderinghost/Monkestation2.0/blob/7dcbf87f807649928d049e97092f28886214b489/monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm#L232"><img src="git.png" width="16" height="16" title="monkestation/code/modules/can_spessmen_feel_pain/pain/_base.dm 232"></a></aside></h3><p>Update our overall pain modifier.
The pain modifier is multiplicative based on all the pain modifiers we have.</p>
<p>returns TRUE if our pain modifier was changed after update, FALSE if it remained the same</p></main><footer>tgstation.dme <a href="https://github.com/wonderinghost/Monkestation2.0/tree/7dcbf87f807649928d049e97092f28886214b489">7dcbf87</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>